{% extends 'base.html' %}
{% load static %}
{% block content %}
<style>
  /* ===== Card Styling ===== */
  .product-card {
    border: none;
    border-radius: 0.75rem;
    box-shadow: 0 0.75rem 1.5rem rgba(0, 0, 0, 0.05);
    transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
  }

  .product-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 1rem 2rem rgba(0, 0, 0, 0.1);
  }

  .product-card img {
    object-fit: cover;
    height: 180px;
    border-top-left-radius: 0.75rem;
    border-top-right-radius: 0.75rem;
  }

  /* ===== Typography ===== */
  .card-title {
    font-size: 1rem;
    font-weight: 600;
  }

  .card-text {
    font-size: 0.9rem;
  }

  .text-success {
    color: #28a745 !important;
  }

  /* ===== Buttons ===== */
  .btn {
    border-radius: 0.4rem;
    font-weight: 500;
  }

  .btn-primary {
    background-color: #007bff;
    border: none;
    color: #fff;
  }

  .btn-primary:hover {
    background-color: #0069d9;
  }
</style>

<div class="row justify-content-between align-items-center mb-4">
  <div class="col">
    <h2 class="fw-bold">
      <i class="fas fa-store me-2 text-primary"></i> All Products
    </h2>
  </div>
  {% if user.is_superuser %}
  <div class="col-auto">
    <a href="{% url 'shop:sell' %}" class="btn btn-primary">
      <i class="fas fa-plus-circle me-1"></i> Add Product
    </a>
  </div>
  {% endif %}
</div>

<div class="row g-4">
  {% for p in products %}
  <div class="col-md-3 col-sm-6">
    <div class="card h-100 shadow-sm border-0 product-card">
      {% if p.image %}
      <img src="{{ p.image.url }}" class="card-img-top" alt="{{ p.title }}">
      {% else %}
      <img src="{% static 'images/placeholder.png' %}" class="card-img-top" alt="No image">
      {% endif %}
      <div class="card-body d-flex flex-column">
        <h5 class="card-title text-truncate">{{ p.title }}</h5>
        <p class="card-text text-muted mb-2">
          <strong class="text-success">â‚¹{{ p.price }}</strong><br>
          <small>Stock: {{ p.stock }}</small>
        </p>
        <a href="{% url 'shop:product_detail' p.id %}" class="btn btn-primary btn-sm mt-auto w-100">
          <i class="fas fa-eye me-1"></i> View Details
        </a>
      </div>
    </div>
  </div>
  {% empty %}
  <div class="col-12">
    <div class="alert alert-info text-center">
      <i class="fas fa-info-circle me-1"></i> No products yet.
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}